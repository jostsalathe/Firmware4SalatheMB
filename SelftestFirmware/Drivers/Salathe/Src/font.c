/*
 * font.c
 *
 *  Created on: 15.03.2018
 *      Author: Jost Salathe <jostsalathe@gmail.com>
 *
 *  This program is free software; you can redistribute it and/or
 *  modify it under the terms of the GNU General Public License
 *  version 2 as published by the Free Software Foundation.
 *
 *  This program is distributed in the hope that it will be useful, but
 *  WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 *  General Public License for more details.
 */

#include "font.h"

const char hexDigits[16] = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'};

char *uint2Str(uint32_t num, uint8_t digits, char *str){
	uint8_t i;
	if (digits < 1) digits = 1;
	else if (digits > 10) digits = 10;
	str[digits] = '\0';
	--digits;
	for (i = 0; i<=digits; ++i) {
		str[digits-i] = num%10+'0';
		num /= 10;
	}
	return str;
}

//TODO: more efficient to build string from right to left?
char *hex2Str(uint32_t num, uint8_t digits, char *str){
	uint8_t i = 0;
	if (digits > 8) digits = 8;
	while (digits>0) {
		--digits;
		str[i] = hexDigits[(num>>(digits*4)) & 0xF];
		++i;
	}
	str[i] = '\0';
	return str;
}

const uint8_t oledCharMap[FONT_NCHARS][FONT_BYTEPERCHAR] = {	// 5*8 pixel character, 1 column per byte, MSB=top LSB=bottom
		//0x00 aka NUL
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x01 aka SOH
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x02 aka STX
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x03 aka ETX
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x04 aka EOT
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x05 aka ENQ
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x06 aka ACK
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x07 aka BEL
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x08 aka BS
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x09 aka HT
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x0A aka LF
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x0B aka VT
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x0C aka FF
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x0D aka CR
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x0E aka SO
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x0F aka SI
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x10 aka DLE
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x11 aka DC1
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x12 aka DC2
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x13 aka DC3
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x14 aka DC4
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x15 aka NAK
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x16 aka SYN
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x17 aka ETB
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x18 aka CAN
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x19 aka EM
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x1A aka SUB
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x1B aka ESC
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x1C aka FS
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x1D aka GS
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x1E aka RS
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x1F aka US
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111},

		//0x20 aka SP
{		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000,
		0b00000000},

		//0x21 aka !
{		0b00000000,
		0b00000000,
		0b11110010,
		0b00000000,
		0b00000000},

		//0x22 aka "
{		0b00000000,
		0b11100000,
		0b00000000,
		0b11100000,
		0b00000000},

		//0x23 aka #
{		0b00101000,
		0b11111110,
		0b00101000,
		0b11111110,
		0b00101000},

		//0x24 aka $
{		0b00100100,
		0b01010100,
		0b11111110,
		0b01010100,
		0b01001000},

		//0x25 aka %
{		0b11000100,
		0b11001000,
		0b00010000,
		0b00100110,
		0b01000110},

		//0x26 aka &
{		0b01101100,
		0b10010010,
		0b10101010,
		0b01000100,
		0b00001010},

		//0x27 aka '
{		0b00000000,
		0b00000000,
		0b11100000,
		0b00000000,
		0b00000000},

		//0x28 aka (
{		0b00000000,
		0b00111100,
		0b01000010,
		0b10000001,
		0b00000000},

		//0x29 aka )
{		0b00000000,
		0b10000001,
		0b01000010,
		0b00111100,
		0b00000000},

		//0x2A aka *
{		0b01000000,
		0b01010000,
		0b11100000,
		0b01010000,
		0b01000000},

		//0x2B aka +
{		0b00010000,
		0b00010000,
		0b01111100,
		0b00010000,
		0b00010000},

		//0x2C aka ,
{		0b00000000,
		0b00000101,
		0b00000110,
		0b00000000,
		0b00000000},

		//0x2D aka -
{		0b00010000,
		0b00010000,
		0b00010000,
		0b00010000,
		0b00010000},

		//0x2E aka .
{		0b00000000,
		0b00000110,
		0b00000110,
		0b00000000,
		0b00000000},

		//0x2F aka /
{		0b00000001,
		0b00000110,
		0b00011000,
		0b01100000,
		0b10000000},

		//0x30 aka 0
{		0b01111100,
		0b10001010,
		0b10010010,
		0b10100010,
		0b01111100},

		//0x31 aka 1
{		0b00000000,
		0b01000010,
		0b11111110,
		0b00000010,
		0b00000000},

		//0x32 aka 2
{		0b01001110,
		0b10010010,
		0b10010010,
		0b10010010,
		0b01100010},

		//0x33 aka 3
{		0b01000100,
		0b10000010,
		0b10010010,
		0b10010010,
		0b01101100},

		//0x34 aka 4
{		0b00011000,
		0b00101000,
		0b01001000,
		0b11111110,
		0b00001000},

		//0x35 aka 5
{		0b11100100,
		0b10100010,
		0b10100010,
		0b10100010,
		0b10011100},

		//0x36 aka 6
{		0b00111100,
		0b01010010,
		0b10010010,
		0b10010010,
		0b00001100},

		//0x37 aka 7
{		0b10000000,
		0b10001110,
		0b10010000,
		0b10100000,
		0b11000000},

		//0x38 aka 8
{		0b01101100,
		0b10010010,
		0b10010010,
		0b10010010,
		0b01101100},

		//0x39 aka 9
{		0b01100000,
		0b10010010,
		0b10010010,
		0b10010100,
		0b01111000},

		//0x3A aka :
{		0b00000000,
		0b00110110,
		0b00110110,
		0b00000000,
		0b00000000},

		//0x3B aka ;
{		0b00000000,
		0b00110101,
		0b00110110,
		0b00000000,
		0b00000000},

		//0x3C aka <
{		0b00010000,
		0b00101000,
		0b01000100,
		0b10000010,
		0b00000000},

		//0x3D aka =
{		0b00101000,
		0b00101000,
		0b00101000,
		0b00101000,
		0b00101000},

		//0x3E aka >
{		0b00000000,
		0b10000010,
		0b01000100,
		0b00101000,
		0b00010000},

		//0x3F aka ?
{		0b01000000,
		0b10000000,
		0b10001010,
		0b10010000,
		0b01100000},

		//0x40 aka @
{		0b01111100,
		0b10000010,
		0b10111010,
		0b10101010,
		0b01111000},

		//0x41 aka A
{		0b00111110,
		0b01001000,
		0b10001000,
		0b01001000,
		0b00111110},

		//0x42 aka B
{		0b11111110,
		0b10010010,
		0b10010010,
		0b10010010,
		0b01101100},

		//0x43 aka C
{		0b01111100,
		0b10000010,
		0b10000010,
		0b10000010,
		0b01000100},

		//0x44 aka D
{		0b11111110,
		0b10000010,
		0b10000010,
		0b01000100,
		0b00111000},

		//0x45 aka E
{		0b11111110,
		0b10010010,
		0b10010010,
		0b10010010,
		0b10000010},

		//0x46 aka F
{		0b11111110,
		0b10010000,
		0b10010000,
		0b10010000,
		0b10000000},

		//0x47 aka G
{		0b01111100,
		0b10000010,
		0b10010010,
		0b10010010,
		0b01011110},

		//0x48 aka H
{		0b11111110,
		0b00010000,
		0b00010000,
		0b00010000,
		0b11111110},

		//0x49 aka I
{		0b00000000,
		0b10000010,
		0b11111110,
		0b10000010,
		0b00000000},

		//0x4A aka J
{		0b00001100,
		0b00000010,
		0b10000010,
		0b11111100,
		0b10000000},

		//0x4B aka K
{		0b11111110,
		0b00010000,
		0b00010000,
		0b00101000,
		0b11000110},

		//0x4C aka L
{		0b11111110,
		0b00000010,
		0b00000010,
		0b00000010,
		0b00000010},

		//0x4D aka M
{		0b11111110,
		0b01100000,
		0b00010000,
		0b01100000,
		0b11111110},

		//0x4E aka N
{		0b11111110,
		0b01100000,
		0b00010000,
		0b00001100,
		0b11111110},

		//0x4F aka O
{		0b01111100,
		0b10000010,
		0b10000010,
		0b10000010,
		0b01111100},

		//0x50 aka P
{		0b11111110,
		0b10010000,
		0b10010000,
		0b10010000,
		0b01100000},

		//0x51 aka Q
{		0b01111100,
		0b10000010,
		0b10000011,
		0b10000011,
		0b01111101},

		//0x52 aka R
{		0b11111110,
		0b10010000,
		0b10010000,
		0b10010000,
		0b01101110},

		//0x53 aka S
{		0b01100100,
		0b10010010,
		0b10010010,
		0b10010010,
		0b01001100},

		//0x54 aka T
{		0b10000000,
		0b10000000,
		0b11111110,
		0b10000000,
		0b10000000},

		//0x55 aka U
{		0b11111100,
		0b00000010,
		0b00000010,
		0b00000010,
		0b11111100},

		//0x56 aka V
{		0b11110000,
		0b00001100,
		0b00000010,
		0b00001100,
		0b11110000},

		//0x57 aka W
{		0b11111100,
		0b00000010,
		0b00111100,
		0b00000010,
		0b11111100},

		//0x58 aka X
{		0b11000110,
		0b00101000,
		0b00010000,
		0b00101000,
		0b11000110},

		//0x59 aka Y
{		0b11000000,
		0b00100000,
		0b00011110,
		0b00100000,
		0b11000000},

		//0x5A aka Z
{		0b10000110,
		0b10001010,
		0b10010010,
		0b10100010,
		0b11000010},

		//0x5B aka [
{		0b00000000,
		0b11111111,
		0b10000001,
		0b10000001,
		0b00000000},

		//0x5C aka \ //this character is special and needs this extra comment
{		0b10000000,
		0b01100000,
		0b00011000,
		0b00000110,
		0b00000001},

		//0x5D aka ]
{		0b00000000,
		0b10000001,
		0b10000001,
		0b11111111,
		0b00000000},

		//0x5E aka ^
{		0b00100000,
		0b01000000,
		0b10000000,
		0b01000000,
		0b00100000},

		//0x6F aka _
{		0b00000001,
		0b00000001,
		0b00000001,
		0b00000001,
		0b00000001},

		//0x60 aka `
{		0b00000000,
		0b10000000,
		0b01000000,
		0b00100000,
		0b00000000},

		//0x61 aka a
{		0b00000100,
		0b00101010,
		0b00101010,
		0b00101010,
		0b00011110},

		//0x62 aka b
{		0b11111100,
		0b00010010,
		0b00100010,
		0b00100010,
		0b00011100},

		//0x63 aka c
{		0b00011100,
		0b00100010,
		0b00100010,
		0b00100010,
		0b00010100},

		//0x64 aka d
{		0b00011100,
		0b00100010,
		0b00100010,
		0b00010010,
		0b11111100},

		//0x65 aka e
{		0b00011100,
		0b00101010,
		0b00101010,
		0b00101010,
		0b00011000},

		//0x66 aka f
{		0b00000000,
		0b00100000,
		0b01111110,
		0b10100000,
		0b10100000},

		//0x67 aka g
{		0b00011000,
		0b00100101,
		0b00100101,
		0b00100101,
		0b00011110},

		//0x68 aka h
{		0b11111110,
		0b00010000,
		0b00100000,
		0b00100000,
		0b00011110},

		//0x69 aka i
{		0b00000000,
		0b00000000,
		0b10111110,
		0b00000000,
		0b00000000},

		//0x6A aka j
{		0b00000010,
		0b00000001,
		0b00000001,
		0b10111110,
		0b00000000},

		//0x6B aka k
{		0b11111110,
		0b00001000,
		0b00010100,
		0b00100010,
		0b00000000},

		//0x6C aka l
{		0b00000000,
		0b10000010,
		0b11111110,
		0b00000010,
		0b00000000},

		//0x6D aka m
{		0b00111110,
		0b00100000,
		0b00011110,
		0b00100000,
		0b00011110},

		//0x6E aka n
{		0b00111110,
		0b00010000,
		0b00100000,
		0b00100000,
		0b00011110},

		//0x6F aka o
{		0b00011100,
		0b00100010,
		0b00100010,
		0b00100010,
		0b00011100},

		//0x70 aka p
{		0b00011111,
		0b00100100,
		0b00100100,
		0b00100100,
		0b00011000},

		//0x71 aka q
{		0b00011000,
		0b00100100,
		0b00100100,
		0b00100100,
		0b00011111},

		//0x72 aka r
{		0b00111110,
		0b00010000,
		0b00100000,
		0b00100000,
		0b00010000},

		//0x73 aka s
{		0b00010010,
		0b00101010,
		0b00101010,
		0b00101010,
		0b00100100},

		//0x74 aka t
{		0b00100000,
		0b11111100,
		0b00100010,
		0b00100010,
		0b00000100},

		//0x75 aka u
{		0b00111100,
		0b00000010,
		0b00000010,
		0b00000010,
		0b00111100},

		//0x76 aka v
{		0b00111000,
		0b00000100,
		0b00000010,
		0b00000100,
		0b00111000},

		//0x77 aka w
{		0b00111100,
		0b00000010,
		0b00001100,
		0b00000010,
		0b00111100},

		//0x78 aka x
{		0b00100010,
		0b00010100,
		0b00001000,
		0b00010100,
		0b00100010},

		//0x79 aka y
{		0b00110000,
		0b00001001,
		0b00001001,
		0b00001001,
		0b00111110},

		//0x7A aka z
{		0b00100010,
		0b00100110,
		0b00101010,
		0b00110010,
		0b00100010},

		//0x7B aka {
{		0b00010000,
		0b00010000,
		0b01101100,
		0b10000010,
		0b10000010},

		//0x7C aka |
{		0b00000000,
		0b00000000,
		0b11111111,
		0b00000000,
		0b00000000},

		//0x7D aka }
{		0b10000010,
		0b10000010,
		0b01101100,
		0b00010000,
		0b00010000},

		//0x7E aka ~
{		0b00010000,
		0b00100000,
		0b00110000,
		0b00010000,
		0b00100000},

		//0x7F aka DEL
{		0b11111111,
		0b10000001,
		0b10000001,
		0b10000001,
		0b11111111}
};
